# 02-物理层

## 局域网介质

* 用途：传输数据
* 方式：编码、传输、接收

{% hint style="info" %}
常见干扰类型

* EMI Electromagnetic Interference 电磁干扰
* RFI Radio Frequency Interference 射频干扰
{% endhint %}

### STP Shielded Twisted Pair / ScTP Screened Twisted Pair 有屏蔽双绞线

* 最大长度：100m
* 速度：10-100Mbps
* 四对线
* 特点：包裹金属屏蔽层，防止外部干扰
  * STP 包裹在每对线上
  * ScTP 包裹在整个线上
* 缺点
  * 传输距离有限
  * 额外屏蔽层增加尺寸和成本
  * 对施工质量要求高

### UTP Unshielded Twisted Pair 无屏蔽双绞线

* 通过双绞线的方式减少干扰：两根导线产生相反信号，干扰信号被抵消
* 最大长度：100m
* 速度：10-100Mbps
* 优点
  * 价格低
  * 尺寸小
  * 安装方便
  * 使用RJ连接器（俗称网线接口），插拔方便，连接可靠
* 缺点
  * 相较于同轴电缆和光纤传输距离有限
  * 容易受到干扰

### Coaxial 同轴电缆

* 最大长度：500m
* 速度：10-100Mbps
* 价格介于双绞线和光纤之间

### Fiber Optic 光纤

* 通过光信号传输数据
* 最大长度：单模 3km，多模 2km
* 速度：100Mbps+
* 材质非金属，不受 EMI RFI 干扰

#### 光纤的模式

| 特性       | 单模光纤（SMF）   | 多模光纤（MMF）    |
| -------- | ----------- | ------------ |
| **传播模式** | 沿光缆的轴传播     | 多种模式         |
| **传输距离** | 长距离         | 短距离（小于2公里）   |
| **带宽性能** | 高带宽，无模式色散影响 | 低带宽，易受模式色散影响 |
| **能量损耗** | 低           | 高            |

### 无线通信

* 将信号编码为无线电波传输数据
* 区分无线电波：频分多路复用
* 传输途径
  * 激光 Laser：速率高，但需要约定好传输路径，不能穿透障碍物
  * 无线电波 Radio：可穿透障碍物，传输距离远
  * 红外线 Infrared：只能在视线范围内传输/反射/折射，不能穿透障碍物/衍射

## 以太网使用的双绞线

{% hint style="info" %}
T568A/B 接线标准

* T568A：白绿 绿 白橙 蓝 白蓝 橙 白棕 棕
* T568B：白橙 橙 白绿 蓝 白蓝 绿 白棕 棕
* Pair 1: 蓝/白蓝
* Pair 2: 橙/白橙
* Pair 3: 绿/白绿
* Pair 4: 棕/白棕
{% endhint %}

* 直通线 Straight-through Cable：两侧都为同一标准
* 反转线 Rollover Cable：俗称 Console 线，1-8 2-7 3-6 连接
* 交叉线 Crossover Cable：一侧为 T568A，一侧为 T568B
  * 用于连接同类设备，如两台计算机、两台交换机

## 介质与信号问题

* 碰撞/冲突：两个设备同时发送数据，导致数据丢失
* 集线器/中继器能扩大冲突域
* 网桥/交换机/路由器能分割冲突域

## 数据交换基础知识

### 模拟/数字信号

* 模拟信号：连续变化的信号
  * 可通过傅里叶变换分解为多个频率的正弦波
* 数字信号：离散的信号
  * 码元：数字信号的最小单位/基本波形
  * 可通过离散傅里叶变换分解为多个频率的正弦波
  * 由于介质本身限制，会产生畸变

### 传输速率

* 无噪声信道：$$C = W \log_2 L \mathrm{ bps}$$
  * C：传输速率
  * W：信道带宽
  * L：信号的电平数量/不同的离散值
* 噪声信道：$$C = W \log_2 (1 + S/N) \mathrm{bps}$$
  * S/N：信噪比
* 提高传输速率的方向
  * 增加信道带宽
  * 提高信噪比
  * 改进编码，让每个码元携带更多信息
* 波特率：信号中每秒钟变化的速度
* 比特率：每秒钟传输的比特数
* 比特率 = 波特率 $$\cdot \log_2 L$$

### 数据通信系统模型

* 在传输过程中使用模拟信号
* 使用调制解调器将发出的数字信号变为模拟信号/将收到的模拟信号变为数字信号

## 编码

{% hint style="info" %}
为便于大家复习，编码部分知识单独使用 Excel 绘制了示意图，可在[下载区](https://cos.tg/jiwang)的`Notes/02-物理层编码示意图.xlsx`目录下找到。
{% endhint %}

### 单极性编码

* `0` 为零，`1` 为正
* 缺点：容易产生错误
  * 难以分辨结束/开始
  * 发送&接收方必须同步
  * 直流分量问题：长时间电平不变，难以区分`0`和`1`

### 极化编码 - 不归零编码 NRZ

* 不归零电平编码：`0` 为负，`1` 为正
  * 缺点：同单极性编码
* 不归零反相编码：`0` 为无电平变化，`1` 为电平反转
  * 对于同一数据有两种相反的编码输出，取决于初始状态
  * 缺点：同单极性

### 极化编码 - 归零编码 RZ

* `0` 为前半段时间负，`1` 为前半段时间正，后半段时间归零
* 优点：信号本身带有同步信息
* 缺点：信息熵低，传输速率低

极化编码 - 曼彻斯特编码

{% hint style="info" %}
PPT 上 “`0` 为前正后负，`1` 为前负后正”和“`1` 为前正后负，`0` 为前负后正”两种类型的图都有，IEEE 802.3 标准推荐前者。
{% endhint %}

* `0` 为前正后负，`1` 为前负后正
* 优点：同步信息明显，采用两个电平，效率高

极化编码 - 差分曼彻斯特编码

* `0` 为位前跳变（和上一位中间跳变后的状态相反），`1` 为位前不跳变（保持上一位中间跳变后的状态）
* 中间跳变：表示时钟信号
* 对于同一数据有两种相反的编码输出，取决于初始状态
* 优点：时钟、数据分离，便于提取

双极性编码

* 两种电平，`0` 为0电平，`1` 为正负电平跃迁（正负交替）
* 只能同步连续的`1`，无法同步连续的`0`

### 多路复用技术

{% hint style="warning" %}
带宽

* 多路复用中的带宽：信道频率范围，单位 Hz
* 上网中的带宽：数据传输速率，单位 bps
* 以下所有的带宽均为第一种定义
{% endhint %}

| 技术       | 说明                            | 适用场景           | 特点                |
| -------- | ----------------------------- | -------------- | ----------------- |
| FDM 频分复用 | 将频谱划分为多个频道，每个频道传输一个信号         | 传统电话线路 AM/FM广播 | 用户在同一时间占用不同带宽     |
| TDM 时分复用 | 将时间划分为多个时隙，每个时隙传输一个信号         | 电话线路           | 周期性，用户在不同时间占用同样带宽 |
| WDM 波分复用 | 将光信号划分为多个波长，每个波长传输一个信号 光的频分复用 | 光纤通信           |                   |
| CDM 码分复用 | 将信号编码为数字序列，每个序列传输一个信号         | 无线通信           | 抗干扰能力强，不易被发现      |

* 时分复用是周期性的，容易带来浪费，可通过**统计时分复用**重新排布时隙

### 通信方式

#### 传输方向

| 英文名称        | 中文名称  | 说明                | 类比     |
| ----------- | ----- | ----------------- | ------ |
| Simplex     | 单工通信  | 单向通信              | 单行道    |
| Half-Duplex | 半双工通信 | 一方发送，一方接收，但不能同时进行 | 单线双向铁路 |
| Full-Duplex | 全双工通信 | 双方可以同时发送和接收       | 双线双向铁路 |

#### 串行/并行

* 串行通信：一根线逐位传输
* 并行通信：多根线同时传输多位，出错要重传

## 物理层设备

### Media 介质

* 以位为单位携带信息流
* 信号从一个网络设备传送到另一个网络设备的方式
* 0-1信号变为电信号或者无线电波光信号等。

### Repeaters 中继器

* 清除、放大、重发被长电缆削弱的信号，延长网络长度
* 不执行筛选，无条件中继

### Hub 集线器

* 多端口中继器 Mulitiport Repeater ：连接多台PC，将衰减的信号放大
* 重复信号：将数据广播到连接的每一个设备（效率低，易拥堵），由接收端确定是否接收消息
* 无法筛选过滤
* 无法路由
* 和Repeater的差别：端口更多，广播式通信，体量更大
* 在逻辑上是总线型拓扑
